- 事务
-----  

	`满足ACID特性操作的一组操作，可以通过Commit提交一个事务，也可以通过ROLLBACK进行回滚`

**隔离级别**
---
- 可串行化
- 读未提交
- 读提交
- 可重复读

**并发一致性问题**
-------------

1. 丢失数据  

---
    `事务T1,T2前后修改一个数据对象，导致前者修改无效，造成数据丢失。

读脏数据

---
	事务T1修改数据对象后，事务T2对其进行读取，然后T1执行了回滚操作，导致T2读取了无效数据。
 
不可重复读

---
	事务T1读取数据对象后，事务T2对该数据对象进行了修改，T1又对该数据进行读取，前后结果不一致。

幻读

---
	事务T1读取了某个范围内的数据，事务T2在这个范围内插入了新数据，T1再次读取这个数据时前后结果不一致。

- 封锁
---

**封锁类型**  

1.读写锁

	1. 排它锁(X锁)：一个事务对数据对象A加了X锁，那么可以对A进行读取和更新，加锁期间其他事务无法对其加锁。
	2. 共享锁(S锁)：一个事务对数据对象A加了S锁，那么只能对A进行读取而不能更新，加锁期间其他事务可以对A加S锁，但不能加X锁。

2.意向锁


**封锁协议**
  

	一级封锁协议：事务 T 要修改数据 A 时必须加 X 锁，直到 T 结束才释放锁。防止同时修改,可解决 丢失修改 问题，因不能同时有两个事务对同一个数据进行修改，那么事务的修改就不会被覆盖。

	二级封锁协议：在一级的基础上，要求读取数据 A 时必须加 S 锁，读取完马上释放 S 锁。防止修改时读取,可解决 丢失修改 和 读脏数据 问题，因为一个事务在对数据 A 进行修改，根据 1 级封锁协议，会加 X 锁，那么就不能再加 S 锁了，也就是不会读入数据。

	三级封锁协议：在二级的基础上，要求读取数据 A 时必须加 S 锁，直到事务结束了才能释放 S 锁。防止读取时修改,可解决 丢失修改 和 读脏数据 问题，还进一步防止了 不可重复读 的问题，因为读 A 时，其它事务不能对 A 加 X 锁，从而避免了在读的期间数据发生改变。
	
	两段锁协议：两段锁协议是指每个事务的执行可以分为两个阶段：生长阶段 (加锁阶段) 和衰退阶段 (解锁阶段)。 两段封锁法可以这样来实现：
	事务开始后就处于加锁阶段，一直到执行 ROLLBACK 和 COMMIT 之前都是加锁阶段。 ROLLBACK 和 COMMIT 使事务进入解锁阶段，即在 ROLLBACK 和 COMMIT 模块中 DBMS 释放所有封锁。
- 关系数据库设计理论  

**范式**
	
	`主属性：某个属性是键的成员`
	
	第一范式：满足所有属性不可再分，即数据项不可再分。

	第二范式：在满足第一范式的基础上，满足非主属性完全函数依赖于候选码(可能存在多个主属性)。即由主属性可推导出全部非主属性。即不允许非主属性依赖于候选码的部分。

	第三范式：在第二范式的基础上，非主属性不传递依赖于非主属性，即非主键之间不该有依赖关系。函数依赖左边是超键或者右边只有主属性。

	BC范式：所有非主属性对候选码一定是完全函数依赖，不允许候选码的部分依赖于非主属性.任何函数依赖的左边必须是超键。
	
**ER图**

	E/R图到关系数据库模式的转换：
	1.直接E/R法
	2.面向对象法
	3."空值"法


**索引**

	多属性索引 index(year,title)属性列表顺序选择，查year较多,year在前,title较多,title在前。

	典型的索引实现采用B-树
	索引的选择，需要考虑磁盘页的IO时间，关系模型中最有用的索引是键索引，因为键是唯一的，每次匹配的元组最多就一个，要么返回该元组的位置，要么什么也不返回。
	存在两种情况，即使建立的索引不在主键上：
		1、相对来说基本没有多少元组在该属性上有给定的值，即使每个具有给定值的元组分别位于不同的磁盘页上，也不需要检索大量磁盘页。
		2、元组在该属性上是聚集的，通过将具有该属性上公共值得元组分组尽可能少的磁盘页里来将一个关系聚合到一个属性上。
**谓词**

	A predicate is a function that returns bool (or something that can be 
	implicitly converted to bool). Predicates are widely used in the STL. 
	The comparison functions for the standard associative containers are predicates, and predicate functions are commonly passed as parameters 
	to algorithms like find_if and the various sorting algorithms."
	简单理解：谓词即断言，是能够输出真假的函数

**服务器环境下的SQL**

+ Web服务器
+ 应用服务器
+ 数据库服务器

